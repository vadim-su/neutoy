server {
	include /etc/nginx/mime.types;
    default_type application/octet-stream;
	listen 8081;
	server_name toy.vadim.one;

	auth_basic "Login Required";
	auth_basic_user_file /etc/nginx/.htpasswd;

	location ~ ^/(api|docs|redoc|openapi.json) {
		proxy_pass http://app:8080;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto $scheme;
	}

	location / {
		root /usr/share/nginx/html;
		index index.html;
	}

}
